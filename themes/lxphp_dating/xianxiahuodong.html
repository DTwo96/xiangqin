<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="/Public/mui/css/mui.css">
    <script type="text/javascript" src="js/jquery-1.8.0.min.js"></script>
    <title>线下活动</title>
</head>

<body>
    <div id="list" class="mui-scroll-wrapper">
        <div class="mui-scroll">
            <ul id="listContent" class="mui-table-view">
                <li class="mui-table-view-cell mui-media">
                    <a href="javascript:;">

                        <div class="mui-media-body">
                            幸福
                            <p class='mui-ellipsis'>能和心爱的人一起睡觉，是件幸福的事情；可是，打呼噜怎么办？</p>
                        </div>
                    </a>
                </li>
                <li class="mui-table-view-cell mui-media">
                    <a href="javascript:;">
                        <img class="mui-media-object mui-pull-left" src="../images/muwu.jpg">
                        <div class="mui-media-body">
                            木屋
                            <p class='mui-ellipsis'>想要这样一间小木屋，夏天挫冰吃瓜，冬天围炉取暖.</p>
                        </div>
                    </a>
                </li>
                <li class="mui-table-view-cell mui-media">
                    <a href="javascript:;">
                        <img class="mui-media-object mui-pull-left" src="../images/cbd.jpg">
                        <div class="mui-media-body">
                            CBD
                            <p class='mui-ellipsis'>烤炉模式的城，到黄昏，如同打翻的调色盘一般.</p>
                        </div>
                    </a>
                </li>
            </ul>
        </div>
    </div>
    <script type="text/javascript" charset="UTF-8" src="/Public/mui/js/mui.js"></script>
    <script type="text/javascript">
        mui.init({
            gestureConfig: {
                tap: true, //默认为true 
                doubletap: true, //默认为false 
            },
            pullRefresh: {
                container: "#list", //下拉刷新容器标识，querySelector能定位的css选择器均可，比如：id、.class等 
                // 上拉加载
                up: {
                    height: 50,//可选.默认50.触发上拉加载拖动距离
                    auto: false,//可选,默认false.自动上拉加载一次
                    contentrefresh: "正在加载...",//可选，正在加载状态时，上拉加载控件上显示的标题内容
                    contentnomore: '没有更多数据了',//可选，请求完毕若没有更多数据时显示的提醒内容；
                    callback: pullfresh //必选，刷新函数，根据具体业务来编写，比如通过ajax从服务器获取新数据； 
                }
            },

        });
        function pullfresh() {

            //业务逻辑代码，比如通过ajax从服务器获取新数据；
            //注意，加载完新数据后，必须执行如下代码，注意：若为ajax请求，则需将如下代码放置在处理完ajax响应数据之后
            //没有更多内容了，endPulldown 传入true， 不再执行下拉刷新
            setTimeout(function () {
                upData();
                mui.toast("刷新了列表");
                mui('#list').pullRefresh().endPullupToRefresh();
            }, 500);
        }
        var loadingCount = 0;
        function upData() {
            loadingCount += 1;
            var value = $('<li class="mui-table-view-cell mui-media"><a href="javascript:;">' +
                '<img class="mui-media-object mui-pull-left" src="../img/shuijiao.jpg">' +
                '<div class="mui-media-body">幸福<p class="mui-ellipsis">能和心爱的人一起睡觉，是件幸福的事情；' +
                '可是，打呼噜怎么办？</p></div></a></li>');

            $("#listContent").append(value);
            if (loadingCount > 3) {
                mui('#list').pullRefresh().endPullupToRefresh(true);
            }
        }

    </script>
</body>

</html>